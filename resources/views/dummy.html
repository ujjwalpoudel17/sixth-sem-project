<?php

namespace App\Http\Controllers;

use App\Models\HotelManagement;
use Illuminate\Http\Request;

class HotelController extends Controller
{
    public function index(){
        $hotelmanagement = HotelManagement::all();
        return view('hoteladmin.hotelmanagement.index',compact('hotelmanagement'));
    }

    public function create(){
        return view(('hoteladmin.hotelmanagement.create'));
    }

    public function store(Request $request){
        $data = $request ->validate([
            'name' => 'required',
            'about' => 'required',
            'address' => 'required',
            'facilities' => 'required',
            'features' => 'required',
            'price' => 'required | numeric',
            'discount_price' => 'required | nullable | numeric',
            'rules' => 'required',
            'photopath' => 'required|image',
            'photopath2' => 'required|image',
            'photopath3' => 'required|image',
            'photopath4' => 'required|image',
        ]);

        //storing the picture
        $photo = $request->file('photopath');
        $photoname = time() . '.' . $photo->extension();
        $photo->move(public_path('images/hotel'), $photoname);
        $data['photopath'] = $photoname;

        $photo2 = $request->file('photopath2');
        $photoname2 = time() . '.' . $photo2->extension();
        $photo2->move(public_path('images/hotel'), $photoname2);
        $data['photopath2'] = $photoname2;

        $photo3 = $request->file('photopath3');
        $photoname3 = time() . '.' . $photo3->extension();
        $photo3->move(public_path('images/hotel'), $photoname3);
        $data['photopath3'] = $photoname3;

        $photo4 = $request->file('photopath4');
        $photoname4 = time() . '.' . $photo4->extension();
        $photo4->move(public_path('images/hotel'), $photoname4);
        $data['photopath4'] = $photoname4;

        HotelManagement::create($data);
        return redirect(route('hotelmanagement.index'))->with('success', 'Hotel added Successfully');

    }


    public function edit(){
        return view(('hoteladmin.hotelmanagement.edit'));
    }
}
